--- 
name: extern-monitor-na-notebooku-s-ubuntu
layout: post
title: "Extern\xC3\xAD monitor na notebooku s Ubuntu"
time: 2011-01-12 22:56:00.001000 +01:00
tags: 
- !binary |
  cG9rcm/EjWlsw70=

- "Syst\xC3\xA9m"
- multihead
- linux
- twinview
- dualhead
- ubuntu
---
<div style="text-align: justify;">V tomto postu popíši jak na notebooku s Ubuntu 10.10 nastavit fungování s externím zobrazovacím zařízením( ve většině případů se bude jednat o monitor/display ). Koho nezajímá omáčka a chce rovnou soubor xorg.conf tak je k dispozici na&nbsp;<a href="https://gist.github.com/gists/777004/download">https://gist.github.com/gists/777004/download</a>,&nbsp;k prohlédnutí na&nbsp;<a href="https://gist.github.com/777004">https://gist.github.com/777004</a>. Na odkazech jsou dva soubory. Původní soubor, který jsem měl na začátku( xorg.conf-default ) a soubor xorg.conf, který vznikl postupným nastavováním. V tomto postu se budu zabývat tím jaký má rozdíl mezi těmito soubory význam. Pro úplnost je přiložen i poslední log nastavovaného X serveru - Xorg.0.log.</div><br /><a name='more'></a><div style="text-align: justify;"><br /></div><br /><div style="text-align: justify;"><b><u>Relevantní konfigurace</u></b></div><ul><li style="text-align: left;"><b>Notebook:</b> NB ASUS M50VC-AS001C 15.4C/T8400/DVDRW/320G/4G/W/B/FP/VHP</li><li style="text-align: left;"><b>Systém:</b> Ubuntu&nbsp;10.10&nbsp;Maverick&nbsp;Meerkat( <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">Linux&nbsp;kazimir&nbsp;2.6.35-24-generic-pae&nbsp;#42-Ubuntu&nbsp;SMP&nbsp;Thu&nbsp;Dec&nbsp;2&nbsp;03:21:31&nbsp;UTC&nbsp;2010&nbsp;i686 GNU/Linux</span> )</li><li style="text-align: left;"><b>Grafická karta:</b>&nbsp;NVIDIA GeForce 9300M G (&nbsp;DSUB/VGA&nbsp;)</li><li style="text-align: left;"><b>Externí monitor:</b>&nbsp;BENQ FP91G+ ( DVI + DSUB/VGA )</li><li style="text-align: left;"><b>Manažer desktopu:</b>&nbsp;GDM 2.30.5</li><li style="text-align: left;"><b>X server:</b>&nbsp;xorg-server 2:1.9.0-0ubuntu7.1</li></ul><div style="text-align: justify;"><b><u>Schéma nastavení</u></b></div><div style="text-align: justify;">Celé nastavení se odehrává v souboru&nbsp;/etc/X11/xorg.conf. Schéma nastavení v tomto souboru je zhruba následující. Jednotlivé komponenty nastavení jsou každá ve své sekci(&nbsp;<span class="Apple-style-span" style="font-family: 'Bitstream Vera Sans Mono', Courier, monospace; line-height: 16px; white-space: pre;">Section</span>&nbsp;). Celé složení toho co vídíme po spuštění grafického systému se nachází v sekci&nbsp;<span class="Apple-style-span" style="font-family: 'Bitstream Vera Sans Mono', Courier, monospace; line-height: 16px; white-space: pre;">ServerLayout</span>. &nbsp;</div><div style="text-align: justify;">V ServerLayout je popsáno z čeho se to co vidíme skládá a název tohoto rozložení. To znamená například z jakých se skládá obrazovek a jak jsou vůči sobě rozestavěné ve fyzickém světě.&nbsp;</div><div style="text-align: justify;">V sekci ServerLayout se již odkazuje na názvy obrazovek ze sekce&nbsp;<span class="Apple-style-span" style="font-family: 'Bitstream Vera Sans Mono', Courier, monospace; line-height: 16px; white-space: pre;">Screen</span><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;">. Těchto sekcí může být v souboru více, pokud X server běží na více obrazovkách. Sekce Screen obsahuje nastavení jedné obrazovky. Nastavuje se zde barevná hloubka obrazovky, z jakého zařízení jde na obrazovku obraz, atp.</span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;">Zařízení ze kterého jde obraz na obrazovku je definováno v sekci </span><span class="Apple-style-span" style="font-family: 'Bitstream Vera Sans Mono', Courier, monospace; line-height: 16px; white-space: pre;">Device</span><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;">. Tato sekce obsahuje informace vetšinou o grafické kartě, používaném ovladači pro tuto kartu a jak by se měl ovladač chovat.</span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;">Než se vrhneme do změn v souboru xorg.conf, tak uvedu dvě věci.&nbsp;</span><br /><br /><ol><li><span class="Apple-style-span" style="line-height: 16px; white-space: pre;">Před jakýmikoliv změnami si je dobré si udělat kopii tohoto souboru, aby bylo k čemu se vracet, při špatném nastaveni X serveru</span></li><li><span class="Apple-style-span" style="line-height: 16px; white-space: pre;">ja si vzpomenu ;)</span></li></ol><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"><b><u><br /></u></b></span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"><b><u>Nastavení více obrazovek</u></b></span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;">Na to aby X server vykresloval na dvě obrazovky je potřeba definovat mu dva zdroje obrazu( sekce Device ). U mého notebooku se jedná o jednu grafickou kartu, takže obě dvě sekce instruují k použití stejného ovladače a to </span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">nvidia</span><span class="Apple-style-span" style="font-family: inherit;">. Aby bylo možné se později odkazovat na každou zvlášť, má každý výtup mé karty jiný identifikátor( volba Identifier ). Další čím se tato dvě zařízení liší je volba Screen. Zabudovaný display notebooku má tuto volbu nastavenu na 0( první zařízení ) a VGA výstup má volbu nastavenu na 1( druhé zařízení ).</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace; line-height: 16px; white-space: pre;">Section "Device"  Identifier "Default Device"  Driver "nvidia"  Option "NoLogo" "True"  Screen 0 EndSection  Section "Device"  Identifier "External screen device"  Driver "nvidia"   Screen 1 EndSection</span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;">Další věc kterou musíme udělat je vytvořit pro každý display/monitor sekci Screen. Většinu voleb mám u displaye zabudovaného v NTB. Je zde opět identifikátor a dále barevná hloubka obrazovky. Volba </span></span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace; line-height: 16px; white-space: pre;">"TwinView" "1"</span><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"> znamená, že poběží jeden X server a plocha jeho obrazu bude vykreslována na všech obrazovkách. V případě že by tato volba byla nahrazena za </span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">"Xinerama" "1",</span><span class="Apple-style-span" style="font-family: inherit;"> běžel by na každé obrazovce samostatný X server. Volba Device říká z jakého zařízení na tuto obrazovku přichází obraz. Použivá se zde název definovaný v sekci Device volbou Identifier.</span></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace; line-height: 16px; white-space: pre;">Section "Screen"  Identifier "Default Screen"  DefaultDepth 24   Option "TwinView" "1"   Device "Default Device" EndSection  Section "Screen"  Identifier "External Screen"  DefaultDepth 24   Device "External screen device" EndSection</span><br /><span class="Apple-style-span" style="font-family: inherit; line-height: 16px; white-space: pre;"><br /></span><br /><span class="Apple-style-span" style="line-height: 16px; white-space: pre;">Restartovaní X serveru v tuto chvíli by mělo vést k jeho spuštění přes dvě obrazovky. Později si ukážeme jak mezi těmito režimi přecházet bez restartovaní.</span></div>
