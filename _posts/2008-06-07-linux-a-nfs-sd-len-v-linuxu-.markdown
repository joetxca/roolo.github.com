--- 
name: linux-a-nfs-sd-len-v-linuxu-
layout: post
title: "Linux a NFS ( Sd\xC3\xADlen\xC3\xAD v Linuxu )"
time: 2008-06-07 01:22:00 +02:00
tags: 
- server
- !binary |
  cG9rcm/EjWlsw70=

- !binary |
  U8OtxaU=

- linux
- kolaborace
---
<!--texy-->Dobrý večer, pokud jdete kalit, dobré ráno pokud už jste zvraceli. V tomto postu popíšu jakže se dá v linuxu nasdílet adresář. Překvapilo mě jak je to jednoduché, takže jsem možná vynechal některé drobnosti, které nejsou až tak důležité, ale funguje to no:)<br/><br/><a name='more'></a><br/><br/>Predtim nez zacnete se ujistete, ze mate nainstalovane baliky nfs-kernel-server a nfs-common. Celá konfigurace spocivala v editaci tří souborů:<br/><br/><strong> /etc/hosts.allow</strong><br/><blockquote>Obsahuje seznam strojů, které mohou přistupovat k místním službám.<br/><blockquote><br/><pre>lockd: 192.168.1.0/255.255.255.0</pre><br/><pre>rquotad: 192.168.1.0/255.255.255.0</pre><br/><pre>mountd  192.168.1.0/255.255.255.0</pre><br/><pre>statd 192.168.1.0/255.255.255.0</pre><br/></blockquote><br/>Zde nastavované služby používá nfs pro své fungování.<br/><br/>Syntaxe je:<br/><blockquote><br/><pre>služba: adresa</pre><br/></blockquote><br/>Adresa může být buď pro počítač, či síť. Pokud by jste chtěli zadat více adres. Musíte je oddělit mezerami. Já jsem zvolil síť, abych nemusel přidávat počítač pokaždé, když někdo přijde a bude si chtít prohlédnout mé fotky, či tak něco. Pokud bych chtěl například povolit přístup ke službě lockd pro výše zmíněnou síť a jeden počítač 192.168.0.10 vypadalo by to asi takto:<br/><blockquote><br/><pre>lockd: 192.168.1.0/255.255.255.0 192.168.0.10</pre><br/></blockquote><br/></blockquote><br/><strong>/etc/hosts.deny</strong><br/><blockquote>Funkčně se jedná o podobný soubor jako předešlý, ale slouží k opačnému účelu. Uvádí se zde počítače a sítě, které ke svému spinavému prádlu pustit nechcete.</blockquote><br/><strong>/etc/exports</strong><br/><blockquote>Tento soubor již konečně obsahuje nastavení toho jaké adresáře se mají sdílet a jak. Syntaxe je podobná jako u předešlých souborů.<br/><blockquote><br/><pre>/media/         192.168.1.0/255.255.255.0(ro)</pre><br/></blockquote><br/>Syntaxe je opravdu hodně podobná. První na řádku je adresář, který budeme sdílet. Následuje adresa počítače, či sítě, který s může s daným adresářem dělat to co je nalepené hned u adresy. Jako u předešlých souborů můžete za mezeru vkládat další a další stroje, či sítě.</blockquote><br/>Pro načtení nastavení sdílení zadejte v konzoli jako uživatel root příkaz:<br/><blockquote><br/><pre>mujstroj:/# exportfs -ra</pre><br/></blockquote><br/>Pokud jste vše nastavili správně, tak by jste měli na jiném počítači vidět služby běžící na vámi nastavovaném stroji:<br/><blockquote><br/><pre>pepa@depo:/$ rpcinfo -p mujstroj</pre><br/><pre>program vers proto   port</pre><br/><pre>100000    2   tcp    111  portmapper</pre><br/><pre>100000    2   udp    111  portmapper</pre><br/><pre>100003    2   udp   2049  nfs</pre><br/><pre>100003    3   udp   2049  nfs</pre><br/><pre>100003    4   udp   2049  nfs</pre><br/><pre>100021    1   udp  32770  nlockmgr</pre><br/><pre>100021    3   udp  32770  nlockmgr</pre><br/><pre>100021    4   udp  32770  nlockmgr</pre><br/><pre>100003    2   tcp   2049  nfs</pre><br/><pre>100003    3   tcp   2049  nfs</pre><br/><pre>100003    4   tcp   2049  nfs</pre><br/><pre>100021    1   tcp  40920  nlockmgr</pre><br/><pre>100021    3   tcp  40920  nlockmgr</pre><br/><pre>100021    4   tcp  40920  nlockmgr</pre><br/><pre>100005    1   udp  32771  mountd</pre><br/><pre>100005    1   tcp  34484  mountd</pre><br/><pre>100005    2   udp  32771  mountd</pre><br/><pre>100005    2   tcp  34484  mountd</pre><br/><pre>100005    3   udp  32771  mountd</pre><br/><pre>100005    3   tcp  34484  mountd</pre><br/><pre>100024    1   udp  32797  status</pre><br/><pre>100024    1   tcp  58528  status</pre><br/></blockquote><br/>Pokud jste viděli něco podobného, tak již niní můžete připojit adresář z druhého počítače. V našem případě připojíme z počítače depo adresář z počítače mujstroj<br/><blockquote><br/><pre>pepa@depo:/$ sudo mount mujstroj:/media/ /mnt/mujstroj_media/</pre><br/><pre>pepa@depo:/$ ls /mnt/mujstroj_media/</pre><br/><pre>cdrom  cdrom0  floppy  floppy0  ipod  usb</pre><br/></blockquote><br/>Zdroje:<br/><br/><a title="Linux NFS-HOWTO" href="http://nfs.sourceforge.net/nfs-howto/index.html"><strong>http://nfs.sourceforge.net/nfs-howto/index.html</strong></a><br/><blockquote>Asi nejdůležitější jsou tam:<br/><blockquote><a title="3. Setting Up an NFS Server" href="http://nfs.sourceforge.net/nfs-howto/ar01s03.html"><em>http://nfs.sourceforge.net/nfs-howto/ar01s03.html</em></a><br/><a title="4. Setting up an NFS Client" href="http://nfs.sourceforge.net/nfs-howto/ar01s04.html"><em>http://nfs.sourceforge.net/nfs-howto/ar01s04.html</em></a><br/><a title="7. Troubleshooting" href="http://nfs.sourceforge.net/nfs-howto/ar01s07.html"><em>http://nfs.sourceforge.net/nfs-howto/ar01s07.html</em></a></blockquote><br/></blockquote>
