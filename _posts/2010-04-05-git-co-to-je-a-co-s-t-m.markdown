--- 
name: git-co-to-je-a-co-s-t-m
layout: post
title: "Git - co to je a co s t\xC3\xADm"
time: 2010-04-05 21:30:00 +02:00
tags: 
- git
- !binary |
  dsO9dm9qw6HFmQ==

- "programov\xC3\xA1n\xC3\xAD"
- kolaborace
- !binary |
  dsO9dm9q

- !binary |
  esOhxI3DoXRlxI1uw61r

---
V tomto postu popíšu takový základ fungování gitu a příkazy, které použijete při práci nejčastěji.<br/><a name='more'></a><br/><a href="http://git-scm.com/">Git</a> je <a href="http://en.wikipedia.org/wiki/Distributed_version_control_system"><abbr title="Distribuovaný/Decentralizovaný Systém pro Kontrolu Verzí">DVCS</abbr></a>. Jako takový nevyžaduje pro své fungování, žádný server. Repozitář máte celý u sebe. To je výhoda, ale některé lidi to zkrátka děsí. Většina obav plyne z objemu dat, které musí mít vývojář u sebe. Vetšinou se ale jedná o necelou velikost pracovní kopie navíc. To neznamená pouze, že můžete pracovat i bez připojení k serveru, ale také že je většina opearací rychlejší, protože se nic nepřenáši po síti, ale pouze se čte z disku.<br/><br/>Další věc která vyplívá z distribuovatelnosti je rozhození čísel revizí. V systému Git se spíš než pojem revize používá pojem changeset. Jedná se o sadu změn, kterou jste provedli při jednom commitu, nebo jeho doplnění (git commit --amend). Takový changeset je identifikován hashem SHA-1. Tento hash je tvořen právě změnami, které jste provedli.<br/><br/>Spolupráce mezi vývojáři probíhá buďto přes centrální server, nebo přes souborový systém. V případě serveru je to buďto nějaký váš server. Pokud takový nemáte můžete využít nějaký z veřejně provozovaných. Uvedu například <a href="http://github.com/">github</a>, <a href="http://gitorious.org/">Gitorious</a>, <a href="http://repo.or.cz/">repo.or.cz</a>. Autentizace probiha přes ssh klíče a vy vlastně čtete soubory pres ssh. Nedávno jsem publikoval posty <a href="http://www.rooland.cz/system/2010/03/git-pres-ssh-na-windows/">Git pres ssh na Windows</a> a  <a href="http://www.rooland.cz/komunikace/2009/12/ssh-na-windows/">SSH na Windows</a>. Ty vám mohou pomoci při rozjíždění kolaborace s jinými vývojáři. Celkem pěkně je postup zpracován také na <a href="http://help.github.com/msysgit-key-setup/">Githubu</a>.<br/><h2>Základní workflow</h2><br/><h3>Zapojení se do existujícího projektu</h3><br/>Jako první si musíte repozitář stáhnout k sobě. V systému git se této operaci říká Klonování:<br/><pre>git clone git://github.com/git/hello-world.git</pre><br/>Provedete nějaké zmeny a commitnete je:<br/><pre>git add .<br/>git commit</pre><br/>Pri commitu se systém git chová trochu jinak než třeba svn. Commit v systému git necommituje automaticky všechny změny, ale akorát ty co mu řeknete. git add přidá všechny změny ke commitnutí. Pokud by jste pouzily prikaz <em>git add surface.c</em> budou commitovány pouze změny v souboru surface.c. Nutno dodat že soubor bude commitován ve stavu při kterém jste použily <em>git add</em>. Pokud nechce používat staging (pripravovani ke commitu), můžete přidat příkazu commit přidat parametr -a:<br/><pre>git commit -a</pre><br/>Takhle git commitne všechny změny.<br/><br/>Takhle můžeme udělat třebas 20 commitů a teprve až potom nahrát změny na server, či kolegovi. V systému git se používá pojem push.<br/><pre>git push</pre><br/>Bez parametrů git pushuje na server origin. To je v tomto případě server ze kterého jste klonovaly.<br/><h3>Vytvoření a zveřejnění projektu</h3><br/>Verzovaný adresář vytvoříme v systému git příkazem init v adresáři projektu a přidáním jeho obsahu k verzování:<br/><pre>git init<br/>git add .</pre><br/>Zbytek je stejný jako v předešlé části až do pushe. Tady nebude git vědět co po něm chcete, protože projekt nenese informaci o žádném jiném repositáři. Ta se přidává přikazem remote.<br/><pre>git remote add origin git://github.com/git/hello-world.git</pre><br/>Stejně by jste si klidně mohly přidat repozitář kolegy Petra<br/><pre>git remote add petr git://github.com/git/hello-world.git</pre><br/>V tomto případě by asi adresa byla jiná, ale radši jsem použil existující repozitář. Při pushi k Petrovi byto pak bylo:<br/><pre>git push petr</pre><br/><h2>Grafické nástroje</h2><br/>Součástí instalace Gitu jsou i nástroje gitk a git-gui. Oba se spouští v adresáři, který je verzovaný systémem pro správu verzí Git.<br/><br/>Gitk je nástroj pro prohlížení historie projektu. Zobrazí vám graf historie, jak se větve mergeovaly. Jednotlivé changesety s jejich podrobnymi informacemi, pokud na nejaky kliknete.<br/><br/>Git-gui je grafická nadstavba nad příkazy systému git. Umožní vám pohodlně commitovat, stageovat a tak podobně.<br/><h2>Závěrem</h2><br/>To je k základnímu workflow vše. Pokud by vás zajímaly složitější postupy, tak napište do komentářů a můžeme se sejít u dalšího postu na podobné téma;) Dále také můžu vřele doporučit knihu Pro Git, která je volně k dispozici (<a href="http://progit.org/">http://progit.org/</a>). Kniha také vyšla v češtine od cz.nic - <a href="http://knihy.nic.cz/">http://knihy.nic.cz/</a>, kde je také k volně dispozici v češtině a zároveň si ji můžete koupit, pokud dáváte přednost papíru. Anglický originál jsem nečetl, ale v českém vydání se informace trochu rozcházejí s jinými zdroji dokumentace. Nejdená se však o nějaké velké odlišnosti, kvůli kterým by jste neměli být schopni se systémem pracovat.
